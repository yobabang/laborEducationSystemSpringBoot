<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>吉利学院劳动教育平台</title>
  <link rel="shortcut icon" href="../static/img/head2.png" type="image/x-icon">
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="format-detection" content="telephone=no">
  <link rel="stylesheet" href="../static/layui/css/layui.css" media="all">
</head>
<body>
<div class="layui-layout layui-layout-admin">
  <div class="layui-header" id="headername">
    <ul class="layui-nav ">
      <li class="layui-nav-item layui-this"><a href="college_index.html">首页</a></li>
    </ul>
    <ul class="layui-nav layui-layout-right">
      <li class="layui-nav-item">
        <a href="javascript:;">
          <img src="../static/img/head.png" class="layui-nav-img">
          {{user.userName}}
        </a>

      </li>
      <li class="layui-nav-item"><a href="../../login.html">退出</a></li>
    </ul>
  </div>
</div>
<div class="con" style="margin-top: 70px;margin-left:15%;margin-right:15%;">
  <div style="margin-top: 70px; text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh;">
    <input type="file" id="fileInput" accept=".csv">
    <button style="margin-bottom: 10px;" onclick="importStudentInfo()">导入学生信息</button>
    <button onclick="viewStudentInfo()">查看学生信息</button>
  </div>
</div>
</body>
</html>

<script src="../static/layui/layui.js" charset="utf-8"></script>
<script src="../static/js/jquery.min.js"></script>
<script src="../static/js/axios-0.18.0.js"></script>
<script src="../static/js/axios-0.18.0.js"></script>
<script src="../static/js/vue.js"></script>
<script src="../static/element-ui/package/lib/index.js"></script>
<link rel="stylesheet" href="../static/element-ui/package/lib/theme-chalk/index.css">
<link rel="stylesheet" type="text/css" href="../static/css/task_detail.css">

<script>
  function importStudentInfo() {
    const fileInput = document.getElementById("fileInput");
    const file = fileInput.files[0];

    if (file) {
      const reader = new FileReader();
      reader.onload = function (e) {
        const csvData = e.target.result;
        Papa.parse(csvData, {
          complete: function(results) {
            // 解析CSV数据并保存到数据库中的逻辑
            console.log(results.data);
            // 这里可以使用AJAX请求将解析后的数据发送到后端保存到数据库
            alert("学生信息导入成功！");
          }
        });
      };
      reader.readAsText(file);
    } else {
      alert("请选择要导入的文件");
    }
  }

  function viewStudentInfo() {
    window.location.href = 'college_stuList.html';
  }
</script>

<script>
    let userName = new Vue({
        el: "#headername",
        data(){
            return{
                user:{
                    userName:'学院管理员',
                },
            }
        },
        mounted(){
            //当页面加载完成后来发送异步请求获取数据
            var _this = this;
            axios({
                method:"get",
                url:"/users/session/1",
            }).then(function (resp){
                _this.user = resp.data.data;
            })
        },
    })
</script>