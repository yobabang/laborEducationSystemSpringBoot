<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>吉利学院劳动教育平台</title>
  <link rel="shortcut icon" href="static/img/head2.png" type="image/x-icon">
  <link rel="stylesheet" type="text/css" href="static/css/task.css">
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="format-detection" content="telephone=no">
  <link rel="stylesheet" href="static/layui/css/layui.css" media="all">
</head>
<body>
<div class="layui-layout layui-layout-admin">
  <div class="layui-header" id="headername">
    <ul class="layui-nav ">
      <li class="layui-nav-item"><a href="ClassList.html">首页</a></li>
      <li class="layui-nav-item layui-this"><a href="StuList.html">学生列表</a></li>
    </ul>
    <ul class="layui-nav layui-layout-right">
      <li class="layui-nav-item">
        <a href="javascript:;">
          <img src="static/img/head.png" class="layui-nav-img">
          {{user.user_name}}
        </a>

      </li>
      <li class="layui-nav-item"><a href="login.html">退出</a></li>
    </ul>
  </div>
</div>
<br>
<br>
<br>
<br>
<div class="con">
  <template>
    <el-form :inline="true" :model="tableSearch" class="demo-form-inline" style="text-align: center;">
      <el-form-item label="学号">
        <el-input v-model="tableSearch.stuCode" placeholder="班级"></el-input>
      </el-form-item>
      <el-form-item label="姓名">
        <el-input v-model="tableSearch.stuName" placeholder="作业类型"></el-input>
      </el-form-item>
      <el-form-item>
        <el-button type="primary" @click="onSubmit">查询</el-button>
      </el-form-item>
    </el-form>
    <el-table
            :data="tableData"
            style="width: 100%"
            :default-sort = "{prop: 'stuCode', order: 'descending'}"
            max-height="100%">
      <el-table-column
              prop="stuCode"
              label="学号"
              min-width="20%">
      </el-table-column>
      <el-table-column
              prop="stuName"
              label="姓名"
              min-width="10%">
        <template slot-scope="scope">
          <div slot="reference" class="name-wrapper">
            <el-tag size="medium">{{ scope.row.stuName }}</el-tag>
          </div>
        </template>
      </el-table-column>
      <el-table-column
              prop="stuSex"
              label="性别"
              min-width="15%"
              :filters="[{ text: '男', value: '男' }, { text: '女', value: '女' }]"
              :filter-method="filterSex"
              filter-placement="bottom-end">
        <template slot-scope="scope">
          <el-tag v-for="item in sexTable" v-show="scope.row.stuSex == item.label" :key="item.label" :type="item.cssName" >
            {{item.label}}
          </el-tag>
        </template>
      </el-table-column>
      <el-table-column
              prop="department"
              label="待定"
              min-width="15%">
      </el-table-column>
      <el-table-column
              prop="test"
              label="待定"
              min-width="15%">
      </el-table-column>
      <el-table-column
              prop="test"
              label="待定"
              min-width="15%">
      </el-table-column>
      <el-table-column
              prop="test"
              label="待定"
              min-width="15%">
      </el-table-column>
    </el-table>
  </template>
</div>
<!-- 请勿在项目正式环境中引用该 layui.js 地址 -->
<script src="static/layui/layui.js" charset="utf-8"></script>
<script src="static/js/jquery.min.js"></script>
<script src="static/js/axios-0.18.0.js"></script>
<script src="static/js/axios-0.18.0.js"></script>
<script src="static/js/vue.js"></script>
<script src="static/element-ui/package/lib/index.js"></script>
<link rel="stylesheet" href="static/element-ui/package/lib/theme-chalk/index.css">
<link rel="stylesheet" type="text/css" href="static/css/task_detail.css">
<script>
 let tableVue = new Vue({
    el: ".con",
    methods: {
      selectAll(){
		var _this = this;
		axios({
		method:"post",
		url:"",
		data:this.tableSearch
		}).then(function (resp){
		_this.tableData = resp.data;
		})
	  },

	  onSubmit(){
	    this.selectAll();
	  },

	  filterSex(value, row) {
	    return row.stuSex === value;
	  },
    },
    mounted(){
	},
    data() {
      return {
        sexTable: [
          {label: '男', cssName: 'success'},
          {label: '女', cssName: 'primary'},
        ],
        tableData: [{
          stuCode: '201124220001',
          stuName: '王小虎',
          stuSex: '男',
          department: '智能科技学院',
        }, {
          stuCode: '201124220002',
          stuName: '张三',
          stuSex: '男',
          department: '智能科技学院',
        }, {
          stuCode: '201124220003',
          stuName: '李四',
          stuSex: '男',
          department: '智能科技学院',
        }, {
          stuCode: '201124220006',
          stuName: '王二',
          stuSex: '女',
          department: '智能科技学院',
        }, {
          stuCode: '201124220033',
          stuName: '麻子',
          stuSex: '女',
          department: '智能科技学院',
        }, {
          stuCode: '201124220062',
          stuName: '天赐',
          stuSex: '男',
          department: '智能科技学院',
        }, {
          stuCode: '201124220090',
          stuName: '小二',
          stuSex: '男',
          department: '智能科技学院',
        }],
        tableSearch:{
          stuCode: '',
          stuName: ''
        },
      }
    }
  })
</script>
<script>
    let userName = new Vue({
        el: "#headername",
        data(){
            return{
                user:{
                    user_name:'测试',
                },
            }
        },
        mounted(){
            //当页面加载完成后来发送异步请求获取数据
            var _this = this;
            axios({
                method:"get",
                url:"user/usersession",
            }).then(function (resp){
                _this.user = resp.data;
                console.log(user)
            })
        },
    })
</script>
</body>
</html>